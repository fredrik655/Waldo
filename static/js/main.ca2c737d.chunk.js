(this.webpackJsonpwaldo=this.webpackJsonpwaldo||[]).push([[0],{19:function(e,t,n){},20:function(e,t,n){},25:function(e,t,n){"use strict";n.r(t);var o=n(0),c=n(1),s=n.n(c),a=n(12),r=n.n(a),i=(n(19),n(13)),u=n(8),l=n(5),d=(n(20),function(e){var t={backgroundImage:'url("'.concat(e.urls[0],'")')};return!0===e.loading?Object(o.jsx)("section",{children:Object(o.jsx)("h3",{children:"Maps loading"})}):Object(o.jsx)("section",{children:Object(o.jsx)("div",{className:"image-select-container",onClick:e.mapClick,style:t})})}),j=function(e){return Object(o.jsx)("div",{id:"nav-container",children:e.playing?[Object(o.jsxs)("div",{id:"face-image-container",children:[Object(o.jsxs)("div",{children:[Object(o.jsx)("img",{src:e.urls[1],alt:"",className:"face-image","data-player":"1",onClick:e.selectPerson}),Object(o.jsx)("p",{children:"Cowboy"})]}),Object(o.jsxs)("div",{children:[Object(o.jsx)("img",{src:e.urls[2],alt:"",className:"face-image","data-player":"2",onClick:e.selectPerson}),Object(o.jsx)("p",{children:"Steve"})]}),Object(o.jsxs)("div",{children:[Object(o.jsx)("img",{src:e.urls[3],alt:"",className:"face-image","data-player":"3",onClick:e.selectPerson}),Object(o.jsx)("p",{children:"Hat man"})]})]},"key-1"),Object(o.jsxs)("h2",{children:["time : ",e.time>0?e.time+"s":""]},"key-2")]:Object(o.jsx)("h2",{children:"Where's waldo?"})})},p=function(e){var t={backgroundImage:'url("'.concat(e.urls[0],'")')};return Object(o.jsx)("div",{id:"game-container",children:Object(o.jsx)("div",{id:"game-image-container",onClick:e.onImageClick,onMouseEnter:e.onMouseEnterDiv,onMouseLeave:e.onMouseLeaveDiv,style:t})})},b=function(){return Object(o.jsx)("div",{id:"mouse-obj"})},f=n(4),m=(n(21),function(e){Object(c.useEffect)((function(){f.a.auth().signInAnonymously().then((function(){console.warn("user signed in")})).catch((function(e){console.log(e)}))}),[]);return Object(o.jsxs)("div",{id:"game-over-page",children:[Object(o.jsx)("p",{children:"All people found"}),Object(o.jsxs)("p",{children:["score ",e.score,"s"]}),Object(o.jsx)("p",{children:"Enter name and submit score"}),Object(o.jsx)("input",{type:"text"}),Object(o.jsx)("button",{onClick:function(t){if(f.a.auth().currentUser){var n=document.querySelector("input");""!==n.value&&f.a.firestore().collection(f.a.auth().currentUser.uid).doc("score").set({name:n.value,score:e.score,timestamp:f.a.firestore.FieldValue.serverTimestamp()}).then((function(){console.warn("data written"),window.location.reload()})).catch((function(e){console.error(e)}))}},children:"Submit"})]})}),O=(n(22),n(23),function(){var e=Object(c.useState)(!1),t=Object(l.a)(e,2),n=t[0],s=t[1],a=Object(c.useState)(0),r=Object(l.a)(a,2),O=r[0],g=r[1],h=Object(c.useState)(!1),y=Object(l.a)(h,2),v=y[0],x=y[1],w=Object(c.useState)([]),S=Object(l.a)(w,2),k=S[0],E=S[1],C=Object(c.useState)(!0),D=Object(l.a)(C,2),I=D[0],q=D[1],M=Object(c.useState)(0),A=Object(l.a)(M,2),L=A[0],P=A[1],F=Object(c.useState)(0),N=Object(l.a)(F,2),R=N[0],T=N[1],U=Object(c.useState)(0),B=Object(l.a)(U,2),X=B[0],z=B[1],Y=Object(c.useState)([[0,0],[0,0],[0,0]]),G=Object(l.a)(Y,2),J=G[0],W=G[1],H=Object(c.useState)([!1,!1,!1]),K=Object(l.a)(H,2),V=K[0],_=K[1],Q=Object(c.useState)({person1:[0,0],person2:[0,0],person3:[0,0]}),Z=Object(l.a)(Q,2),$=Z[0],ee=Z[1];Object(c.useEffect)((function(){var e=function(){};return!1===v?e=setTimeout((function(){z(X+1)}),1e3):z(0),function(){return clearTimeout(e)}}),[X]),Object(c.useEffect)((function(){document.addEventListener("mousemove",se);var e=Object(u.a)(k),t=f.a.storage();t.ref("/waldo(1).png").getDownloadURL().then((function(t){e.push(t)})).finally((function(){t.ref("/waldoPerson1.png").getDownloadURL().then((function(t){e.push(t)})).finally((function(){t.ref("/waldoPerson2.png").getDownloadURL().then((function(t){e.push(t)})).finally((function(){t.ref("/waldoPerson3.png").getDownloadURL().then((function(t){e.push(t),E(e),q(!1)}))}))}))})),f.a.firestore().collection("imagePositions").doc("people").get().then((function(e){if(e.exists){var t=e.data(),n=Object(i.a)({},$);n.person1[0]=+t.person1[0],n.person1[1]=+t.person1[1],n.person2[0]=+t.person2[0],n.person2[1]=+t.person2[1],n.person3[0]=+t.person3[0],n.person3[1]=+t.person3[1],ee(n)}}))}),[]),Object(c.useEffect)((function(){if(Object(u.a)(document.getElementsByClassName("face-image")).forEach((function(e,t){e.style.border="none",+e.getAttribute("data-player")!==O||V[t]||(e.style.border="5px solid green"),!0===V[t]&&(e.style.border="2px dashed red",e.style.opacity=.5,e.style.pointerEvents="none")})),!V.includes(!1)){var e=document.querySelector("body");document.querySelector("#mouse-obj").style.opacity=0,e.style.cursor="default",x(!0)}}),[O,V]),Object(c.useEffect)((function(){z(Math.round((new Date).getTime()/1e3)-L)}),[L]),Object(c.useEffect)((function(){!0===n&&g(1)}),[n]);var te=function(e){var t,n,o,c,s=e.target.getBoundingClientRect(),a=function(e,t,n){return[+parseFloat((e-n.left)/n.width).toFixed(3),+parseFloat((t-n.top)/n.height).toFixed(3)]}(e.clientX,e.clientY,s),r=Object(l.a)(a,2),i=r[0],d=r[1],j=O;if(t=i,n=d,o=$,(1===(c=j)?t<o.person1[0]+.02&&t>o.person1[0]-.02&&n<o.person1[1]+.02&&n>o.person1[1]-.02:2===c?t<o.person2[0]+.02&&t>o.person2[0]-.02&&n<o.person2[1]+.02&&n>o.person2[1]-.02:3===c?t<o.person3[0]+.02&&t>o.person3[0]-.02&&n<o.person3[1]+.02&&n>o.person3[1]-.02:void 0)&&!1===V[j-1]){var p=Object(u.a)(J),b=Object(u.a)(V);p[j-1]=[i,d],W(p),b[j-1]=!0,_(b)}},ne=function(e){s(!0)},oe=function(e){var t=document.querySelector("body");document.querySelector("#mouse-obj").style.opacity=1,t.style.cursor="none"},ce=function(e){var t=document.querySelector("body");document.querySelector("#mouse-obj").style.opacity=0,t.style.cursor="default"},se=function(e){var t=document.querySelector("#mouse-obj"),n=e.pageX,o=e.pageY;t.style.left=n+"px",t.style.top=o+"px"};return Object(o.jsxs)("div",{className:"App",children:[Object(o.jsx)(b,{}),Object(o.jsx)(j,{playing:n,selectPerson:function(e){g(+e.target.getAttribute("data-player"))},urls:k,time:X}),v?(0===R&&T(f.a.firestore.Timestamp.now().seconds),Object(o.jsx)(m,{score:R-L})):n?(0===L&&P(f.a.firestore.Timestamp.now().seconds),Object(o.jsx)(p,{onImageClick:te,onMouseEnterDiv:oe,onMouseLeaveDiv:ce,urls:k})):Object(o.jsx)(d,{mapClick:ne,urls:k,loading:I})]})}),g={apiKey:"AIzaSyDnSIRqFzsOXiW0_p3GgexXfYql3Gh7ApM",authDomain:"waldo-53228.firebaseapp.com",projectId:"waldo-53228",storageBucket:"waldo-53228.appspot.com",messagingSenderId:"297093839443",appId:"1:297093839443:web:67a2071a47905a042da4a6"};f.a.initializeApp(g),r.a.render(Object(o.jsx)(s.a.StrictMode,{children:Object(o.jsx)(O,{})}),document.getElementById("root"))}},[[25,1,2]]]);
//# sourceMappingURL=main.ca2c737d.chunk.js.map